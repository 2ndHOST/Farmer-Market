datasource db {
	provider = "sqlite"
	url      = "file:./prisma/dev.db"
}

generator client {
	provider = "prisma-client-js"
}

model Listing {
	id         String   @id @default(cuid())
	crop       String
	unit       String
	quantity   Float
	minPrice   Float
	farmerName String
	description String?
	bids       Bid[]
	createdAt  DateTime @default(now())
}

model Bid {
	id        String   @id @default(cuid())
	amount    Float
	buyerName String?
	listing   Listing  @relation(fields: [listingId], references: [id])
	listingId String
	createdAt DateTime @default(now())
}


model User {
	id         String   @id @default(cuid())
	phone      String   @unique
	name       String?
	role       String   @default("buyer")
	createdAt  DateTime @default(now())
}

model OtpCode {
	id         String   @id @default(cuid())
	phone      String
	code       String
	expiresAt  DateTime
	consumedAt DateTime?
	createdAt  DateTime @default(now())

	@@index([phone, createdAt])
}


