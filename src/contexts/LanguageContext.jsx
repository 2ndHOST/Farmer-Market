import { createContext, useContext, useState, useEffect } from 'react'

const LanguageContext = createContext()

// Language translations
const translations = {
  en: {
    // Navigation
    home: 'Home',
    market: 'Market',
    equipmentRental: 'Equipment Rental',
    community: 'Community',
    contact: 'Contact',
    login: 'Login',
    searchPlaceholder: 'Search crops or equip',
    
    // Landing Page
    heroTitle: 'Direct connection between farmers & buyers. Fair prices. No middlemen.',
    heroSubtitle: 'Empowering farmers, supporting buyers.',
    farmerButton: 'I am a Farmer ЁЯСитАНЁЯМ╛',
    buyerButton: 'I am a Buyer ЁЯЫТ',
    equipmentButton: 'Rent Equipment ЁЯЪЬ',
    farmerDescription: 'I am a Farmer: Sell crops directly, access fair prices, and rent machinery at affordable rates.',
    buyerDescription: 'I am a Buyer: Buy fresh produce, bid transparently, and support local farmers.',
    
    // Benefits
    whyAgriConnect: 'Why AgriConnect?',
    forFarmers: 'For Farmers',
    forFarmersDesc: 'Sell directly to buyers, get better prices, avoid middlemen.',
    forBuyers: 'For Buyers',
    forBuyersDesc: 'Buy fresh produce, transparent pricing, support farmers.',
    forCommunity: 'For Community',
    forCommunityDesc: 'Farmers can collaborate, share equipment, and support each other.',
    
    // How it works
    howItWorks: 'How It Works',
    step1: 'Step 1',
    step1Desc: 'Farmer lists crops.',
    step2: 'Step 2',
    step2Desc: 'Buyers place bids.',
    step3: 'Step 3',
    step3Desc: 'Deal is finalized.',
    step4: 'Step 4',
    step4Desc: 'Rent or borrow equipment from nearby farmers.',
    
    // Area Selector
    setYourArea: 'Set Your Area',
    areaSubtitle: 'Choose the distance around your location to find buyers, sellers, and rentals.',
    location: 'Location',
    autoDetectLocation: 'Auto-detect Current Location',
    detectingLocation: 'Detecting Location...',
    or: 'or',
    manualLocationPlaceholder: 'Enter your location manually (e.g., Mumbai, Maharashtra)',
    setLocation: 'Set Location',
    change: 'Change',
    searchRadius: 'Search Radius',
    currentSettings: 'Current Settings',
    locationLabel: 'Location:',
    radiusLabel: 'Radius:',
    areaFilterNote: 'тЬУ This area will be used to filter listings across all pages',
    
    // Equipment Rental
    equipmentRental: 'Equipment Rental',
    equipmentSubtitle: 'Rent farm equipment. Pay with money or barter options.',
    addEquipment: 'Add Equipment',
    showBarterOnly: 'Show only barter-available equipment',
    requestRental: 'Request Rental',
    rent: 'Rent:',
    barter: 'Barter:',
    barterAvailable: 'Available (produce/services)',
    barterNotAvailable: 'Not available',
    noEquipmentFound: 'No equipment found',
    loading: 'Loading...',
    
    // Add Equipment Modal
    addEquipmentTitle: 'Add Equipment',
    equipmentName: 'Equipment Name',
    equipmentNamePlaceholder: 'e.g., Tractor, Rotavator, Irrigation Pump',
    contactNumber: 'Contact Number',
    contactPlaceholder: '+91 98765 43210',
    rentalPrice: 'Rental Price (per day)',
    pricePlaceholder: '1500',
    addressLocation: 'Address/Location',
    locationPlaceholder: 'City, State',
    barterAvailable: 'Barter available (produce/services)',
    equipmentPhoto: 'Equipment Photo',
    clickToUpload: 'Click to upload photo',
    fileFormat: 'PNG, JPG up to 5MB',
    cancel: 'Cancel',
    addEquipmentButton: 'Add Equipment',
    
    // Farmer Dashboard
    myListings: 'My Listings',
    sell: 'Sell',
    setLocationPrompt: 'Set your location to see nearby buyers and equipment',
    goToHomePage: 'Go to the Home page to set your area radius',
    noListingsYet: 'No listings yet. Use Sell to add one.',
    
    // Common
    required: 'Required',
    error: 'Error',
    success: 'Success',
    close: 'Close',
    submit: 'Submit',
    save: 'Save',
    edit: 'Edit',
    delete: 'Delete',
    confirm: 'Confirm',
    yes: 'Yes',
    no: 'No'
  },
  
  hi: {
    // Navigation
    home: 'рд╣реЛрдо',
    market: 'рдмрд╛рдЬрд╛рд░',
    equipmentRental: 'рдЙрдкрдХрд░рдг рдХрд┐рд░рд╛рдпрд╛',
    community: 'рд╕рдореБрджрд╛рдп',
    contact: 'рд╕рдВрдкрд░реНрдХ',
    login: 'рд▓реЙрдЧрд┐рди',
    searchPlaceholder: 'рдлрд╕рд▓ рдпрд╛ рдЙрдкрдХрд░рдг рдЦреЛрдЬреЗрдВ',
    
    // Landing Page
    heroTitle: 'рдХрд┐рд╕рд╛рдиреЛрдВ рдФрд░ рдЦрд░реАрджрд╛рд░реЛрдВ рдХреЗ рдмреАрдЪ рд╕реАрдзрд╛ рд╕рдВрдкрд░реНрдХред рдЙрдЪрд┐рдд рдореВрд▓реНрдпред рдмрд┐рдЪреМрд▓рд┐рдпреЛрдВ рдХреЗ рдмрд┐рдирд╛ред',
    heroSubtitle: 'рдХрд┐рд╕рд╛рдиреЛрдВ рдХреЛ рд╕рд╢рдХреНрдд рдмрдирд╛рдирд╛, рдЦрд░реАрджрд╛рд░реЛрдВ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдирд╛ред',
    farmerButton: 'рдореИрдВ рдПрдХ рдХрд┐рд╕рд╛рди рд╣реВрдВ ЁЯСитАНЁЯМ╛',
    buyerButton: 'рдореИрдВ рдПрдХ рдЦрд░реАрджрд╛рд░ рд╣реВрдВ ЁЯЫТ',
    equipmentButton: 'рдЙрдкрдХрд░рдг рдХрд┐рд░рд╛рдпрд╛ ЁЯЪЬ',
    farmerDescription: 'рдореИрдВ рдПрдХ рдХрд┐рд╕рд╛рди рд╣реВрдВ: рдлрд╕рд▓реЛрдВ рдХреЛ рд╕реАрдзреЗ рдмреЗрдЪреЗрдВ, рдЙрдЪрд┐рдд рдореВрд▓реНрдп рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ, рдФрд░ рдХрд┐рдлрд╛рдпрддреА рджрд░реЛрдВ рдкрд░ рдорд╢реАрдирд░реА рдХрд┐рд░рд╛рдП рдкрд░ рд▓реЗрдВред',
    buyerDescription: 'рдореИрдВ рдПрдХ рдЦрд░реАрджрд╛рд░ рд╣реВрдВ: рддрд╛рдЬреА рдЙрдкрдЬ рдЦрд░реАрджреЗрдВ, рдкрд╛рд░рджрд░реНрд╢реА рдмреЛрд▓реА рд▓рдЧрд╛рдПрдВ, рдФрд░ рд╕реНрдерд╛рдиреАрдп рдХрд┐рд╕рд╛рдиреЛрдВ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВред',
    
    // Benefits
    whyAgriConnect: 'AgriConnect рдХреНрдпреЛрдВ?',
    forFarmers: 'рдХрд┐рд╕рд╛рдиреЛрдВ рдХреЗ рд▓рд┐рдП',
    forFarmersDesc: 'рдЦрд░реАрджрд╛рд░реЛрдВ рдХреЛ рд╕реАрдзреЗ рдмреЗрдЪреЗрдВ, рдмреЗрд╣рддрд░ рдореВрд▓реНрдп рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ, рдмрд┐рдЪреМрд▓рд┐рдпреЛрдВ рд╕реЗ рдмрдЪреЗрдВред',
    forBuyers: 'рдЦрд░реАрджрд╛рд░реЛрдВ рдХреЗ рд▓рд┐рдП',
    forBuyersDesc: 'рддрд╛рдЬреА рдЙрдкрдЬ рдЦрд░реАрджреЗрдВ, рдкрд╛рд░рджрд░реНрд╢реА рдореВрд▓реНрдп рдирд┐рд░реНрдзрд╛рд░рдг, рдХрд┐рд╕рд╛рдиреЛрдВ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВред',
    forCommunity: 'рд╕рдореБрджрд╛рдп рдХреЗ рд▓рд┐рдП',
    forCommunityDesc: 'рдХрд┐рд╕рд╛рди рд╕рд╣рдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЙрдкрдХрд░рдг рд╕рд╛рдЭрд╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдФрд░ рдПрдХ-рджреВрд╕рд░реЗ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред',
    
    // How it works
    howItWorks: 'рдпрд╣ рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ',
    step1: 'рдЪрд░рдг 1',
    step1Desc: 'рдХрд┐рд╕рд╛рди рдлрд╕рд▓реЛрдВ рдХреА рд╕реВрдЪреА рдмрдирд╛рддрд╛ рд╣реИред',
    step2: 'рдЪрд░рдг 2',
    step2Desc: 'рдЦрд░реАрджрд╛рд░ рдмреЛрд▓реА рд▓рдЧрд╛рддреЗ рд╣реИрдВред',
    step3: 'рдЪрд░рдг 3',
    step3Desc: 'рд╕реМрджрд╛ рдкреВрд░рд╛ рд╣реЛрддрд╛ рд╣реИред',
    step4: 'рдЪрд░рдг 4',
    step4Desc: 'рдкрд╛рд╕ рдХреЗ рдХрд┐рд╕рд╛рдиреЛрдВ рд╕реЗ рдЙрдкрдХрд░рдг рдХрд┐рд░рд╛рдП рдкрд░ рд▓реЗрдВ рдпрд╛ рдЙрдзрд╛рд░ рд▓реЗрдВред',
    
    // Area Selector
    setYourArea: 'рдЕрдкрдирд╛ рдХреНрд╖реЗрддреНрд░ рд╕реЗрдЯ рдХрд░реЗрдВ',
    areaSubtitle: 'рдЦрд░реАрджрд╛рд░реЛрдВ, рд╡рд┐рдХреНрд░реЗрддрд╛рдУрдВ рдФрд░ рдХрд┐рд░рд╛рдП рдХреЗ рд▓рд┐рдП рдЕрдкрдиреЗ рд╕реНрдерд╛рди рдХреЗ рдЖрд╕рдкрд╛рд╕ рдХреА рджреВрд░реА рдЪреБрдиреЗрдВред',
    location: 'рд╕реНрдерд╛рди',
    autoDetectLocation: 'рд╡рд░реНрддрдорд╛рди рд╕реНрдерд╛рди рдХрд╛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдкрддрд╛ рд▓рдЧрд╛рдПрдВ',
    detectingLocation: 'рд╕реНрдерд╛рди рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдпрд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИ...',
    or: 'рдпрд╛',
    manualLocationPlaceholder: 'рдЕрдкрдирд╛ рд╕реНрдерд╛рди рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рджрд░реНрдЬ рдХрд░реЗрдВ (рдЬреИрд╕реЗ, рдореБрдВрдмрдИ, рдорд╣рд╛рд░рд╛рд╖реНрдЯреНрд░)',
    setLocation: 'рд╕реНрдерд╛рди рд╕реЗрдЯ рдХрд░реЗрдВ',
    change: 'рдмрджрд▓реЗрдВ',
    searchRadius: 'рдЦреЛрдЬ рддреНрд░рд┐рдЬреНрдпрд╛',
    currentSettings: 'рд╡рд░реНрддрдорд╛рди рд╕реЗрдЯрд┐рдВрдЧреНрд╕',
    locationLabel: 'рд╕реНрдерд╛рди:',
    radiusLabel: 'рддреНрд░рд┐рдЬреНрдпрд╛:',
    areaFilterNote: 'тЬУ рдпрд╣ рдХреНрд╖реЗрддреНрд░ рд╕рднреА рдкреГрд╖реНрдареЛрдВ рдкрд░ рд╕реВрдЪрд┐рдпреЛрдВ рдХреЛ рдлрд╝рд┐рд▓реНрдЯрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛',
    
    // Equipment Rental
    equipmentRental: 'рдЙрдкрдХрд░рдг рдХрд┐рд░рд╛рдпрд╛',
    equipmentSubtitle: 'рдХреГрд╖рд┐ рдЙрдкрдХрд░рдг рдХрд┐рд░рд╛рдП рдкрд░ рд▓реЗрдВред рдкреИрд╕реЗ рдпрд╛ рд╡рд╕реНрддреБ рд╡рд┐рдирд┐рдордп рд╡рд┐рдХрд▓реНрдкреЛрдВ рд╕реЗ рднреБрдЧрддрд╛рди рдХрд░реЗрдВред',
    addEquipment: 'рдЙрдкрдХрд░рдг рдЬреЛрдбрд╝реЗрдВ',
    showBarterOnly: 'рдХреЗрд╡рд▓ рд╡рд╕реНрддреБ рд╡рд┐рдирд┐рдордп рдЙрдкрд▓рдмреНрдз рдЙрдкрдХрд░рдг рджрд┐рдЦрд╛рдПрдВ',
    requestRental: 'рдХрд┐рд░рд╛рдпрд╛ рдЕрдиреБрд░реЛрдз',
    rent: 'рдХрд┐рд░рд╛рдпрд╛:',
    barter: 'рд╡рд╕реНрддреБ рд╡рд┐рдирд┐рдордп:',
    barterAvailable: 'рдЙрдкрд▓рдмреНрдз (рдЙрддреНрдкрд╛рдж/рд╕реЗрд╡рд╛рдПрдВ)',
    barterNotAvailable: 'рдЙрдкрд▓рдмреНрдз рдирд╣реАрдВ',
    noEquipmentFound: 'рдХреЛрдИ рдЙрдкрдХрд░рдг рдирд╣реАрдВ рдорд┐рд▓рд╛',
    loading: 'рд▓реЛрдб рд╣реЛ рд░рд╣рд╛ рд╣реИ...',
    
    // Add Equipment Modal
    addEquipmentTitle: 'рдЙрдкрдХрд░рдг рдЬреЛрдбрд╝реЗрдВ',
    equipmentName: 'рдЙрдкрдХрд░рдг рдХрд╛ рдирд╛рдо',
    equipmentNamePlaceholder: 'рдЬреИрд╕реЗ, рдЯреНрд░реИрдХреНрдЯрд░, рд░реЛрдЯрд╛рд╡реЗрдЯрд░, рд╕рд┐рдВрдЪрд╛рдИ рдкрдВрдк',
    contactNumber: 'рд╕рдВрдкрд░реНрдХ рдирдВрдмрд░',
    contactPlaceholder: '+91 98765 43210',
    rentalPrice: 'рдХрд┐рд░рд╛рдпрд╛ рдореВрд▓реНрдп (рдкреНрд░рддрд┐ рджрд┐рди)',
    pricePlaceholder: '1500',
    addressLocation: 'рдкрддрд╛/рд╕реНрдерд╛рди',
    locationPlaceholder: 'рд╢рд╣рд░, рд░рд╛рдЬреНрдп',
    barterAvailable: 'рд╡рд╕реНрддреБ рд╡рд┐рдирд┐рдордп рдЙрдкрд▓рдмреНрдз (рдЙрддреНрдкрд╛рдж/рд╕реЗрд╡рд╛рдПрдВ)',
    equipmentPhoto: 'рдЙрдкрдХрд░рдг рдлреЛрдЯреЛ',
    clickToUpload: 'рдлреЛрдЯреЛ рдЕрдкрд▓реЛрдб рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ',
    fileFormat: 'PNG, JPG 5MB рддрдХ',
    cancel: 'рд░рджреНрдж рдХрд░реЗрдВ',
    addEquipmentButton: 'рдЙрдкрдХрд░рдг рдЬреЛрдбрд╝реЗрдВ',
    
    // Farmer Dashboard
    myListings: 'рдореЗрд░реА рд╕реВрдЪрд┐рдпрд╛рдВ',
    sell: 'рдмреЗрдЪреЗрдВ',
    setLocationPrompt: 'рдкрд╛рд╕ рдХреЗ рдЦрд░реАрджрд╛рд░реЛрдВ рдФрд░ рдЙрдкрдХрд░рдгреЛрдВ рдХреЛ рджреЗрдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдкрдирд╛ рд╕реНрдерд╛рди рд╕реЗрдЯ рдХрд░реЗрдВ',
    goToHomePage: 'рдЕрдкрдирд╛ рдХреНрд╖реЗрддреНрд░ рддреНрд░рд┐рдЬреНрдпрд╛ рд╕реЗрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╣реЛрдо рдкреЗрдЬ рдкрд░ рдЬрд╛рдПрдВ',
    noListingsYet: 'рдЕрднреА рддрдХ рдХреЛрдИ рд╕реВрдЪреА рдирд╣реАрдВред рдЬреЛрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдмреЗрдЪреЗрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред',
    
    // Common
    required: 'рдЖрд╡рд╢реНрдпрдХ',
    error: 'рддреНрд░реБрдЯрд┐',
    success: 'рд╕рдлрд▓рддрд╛',
    close: 'рдмрдВрдж рдХрд░реЗрдВ',
    submit: 'рдЬрдорд╛ рдХрд░реЗрдВ',
    save: 'рд╕рд╣реЗрдЬреЗрдВ',
    edit: 'рд╕рдВрдкрд╛рджрд┐рдд рдХрд░реЗрдВ',
    delete: 'рд╣рдЯрд╛рдПрдВ',
    confirm: 'рдкреБрд╖реНрдЯрд┐ рдХрд░реЗрдВ',
    yes: 'рд╣рд╛рдВ',
    no: 'рдирд╣реАрдВ'
  }
}

// Provider component
export function LanguageProvider({ children }) {
  const [language, setLanguage] = useState(() => {
    // Load saved language from localStorage or default to English
    return localStorage.getItem('app_language') || 'en'
  })

  // Save language to localStorage whenever it changes
  useEffect(() => {
    localStorage.setItem('app_language', language)
  }, [language])

  const toggleLanguage = () => {
    setLanguage(prev => prev === 'en' ? 'hi' : 'en')
  }

  const t = (key) => {
    return translations[language][key] || key
  }

  const value = {
    language,
    setLanguage,
    toggleLanguage,
    t,
    isHindi: language === 'hi'
  }

  return (
    <LanguageContext.Provider value={value}>
      {children}
    </LanguageContext.Provider>
  )
}

// Custom hook to use language context
export function useLanguage() {
  const context = useContext(LanguageContext)
  if (!context) {
    throw new Error('useLanguage must be used within a LanguageProvider')
  }
  return context
}

export default LanguageContext
